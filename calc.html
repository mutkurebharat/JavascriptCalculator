<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>Calcu;ator By Using Javascript</title>

		https://www.youtube.com/watch?v=Gj8JJn0n7fU
		<style>
			.button{
					width:51px;

				   }
			.display input{
							position:relative;
							left:2px;
							top:2px;
							height:35px;
							color:black;
							text-align:center;
							font-size:21px;

						  }


		</style>
	</head>
	<body>
		<div align="center">
			<div class="display" ondrop="return false;" onpaste="return false;" oncut="return false;" oncopy="return false;">
				<div class="keys">

					<input type="text" size="15.75" id="display" readonly/>
					<p>
						<input type="button" class="button" value="mrc" onclick='c("not defined")'>
						<input type="button" class="button" value="(" onclick='p("(")'>
						<input type="button" class="button" value=")" onclick='p(")")'>
						<input type="button" class="button" value="/" onclick='p("/")'>
					</p>
					<p>
						<input type="button" class="button" value="7" onclick='p("7")'>
						<input type="button" class="button" value="8" onclick='p("8")'>
						<input type="button" class="button" value="9" onclick='p("9")'>
						<input type="button" class="button" value="*" onclick='p("*")'>
					</p>
					<p>
						<input type="button" class="button" value="4" onclick='p("4")'>
						<input type="button" class="button" value="5" onclick='p("5")'>
						<input type="button" class="button" value="6" onclick='p("6")'>
						<input type="button" class="button" value="-" onclick='p("-")'>
					</p>
					<p>
						<input type="button" class="button" value="1" onclick='p("1")'>
						<input type="button" class="button" value="2" onclick='p("2")'>
						<input type="button" class="button" value="3" onclick='p("3")'>
						<input type="button" class="button" value="+" onclick='p("+")'>
					</p>
					<p>
						<input type="button" class="button" value="0" onclick='p("0")'>
						<input type="button" class="button" value="." onclick='p(".")'>
						<input type="button" class="button" value="C" onclick='c("")'>
						<input type="button" class="button" id="double" value= "=" onclick='e()'>
					</p>
				</div>
			</div>
		</div>
		<script>


						 var operator = "";
						 var number = "";
						 var index = '';
						 var lastOperation = false;
						 var checkOperation =true;
						/*document.getElementById("display").onkeydown = function filterNonDigits(evt)
																		{
																		  var event = event || window.event;
																		  var keyentered = event.keyCode || event.which;
																		  keyentered = String.fromCharCode(keyentered);

																		  //var regex1 = /[0-9]|\./;
																		  var regex2 = /^[A-Z@~`!@#$%^&*()_=+\\\\';:\"\\/?>.<,-]*$/;


																		  if( regex2.test(keyentered) ) {
																			event.returnValue = true;
																			if(event.preventDefault)
																			 event.preventefault();
																		  }
																		}*/
								window.onkeyup = function(event){


					         if ((event.keyCode >= 48 && event.keyCode <= 55)  ||
							        (event.key === "8") || (event.keyCode === 57) ||
							        (event.keyCode >= 96 && event.keyCode <= 105)){
												p(event.key);
									    } else if (event.keyCode === 27) {
									      c();
									    } else if (event.keyCode === 8) {
									      c("");
									    } else if (event.key === "+") {
									      p(event.key);
									    } else if (event.key === "-") {
									      p(event.key);
									    } else if (event.key === "*") {
									      p(event.key);
									    } else if (event.key === "/") {
									      p(event.key);
									    } else if (event.key === ".") {
									      p(event.key);         // decimal
									    } else if (event.keyCode === 13) {
									      e();
									    }
									  };



												function c(val){
																document.getElementById("display").value = val;
																lastOperation = false;
																checkOperation= false;
																number = 0;

														    operator = null;

															   }
												function p(val){
													lastOperation = false;

																/*var length = document.getElementById("display").value.length - 1;
																if(length.includes('+' || '-' || '*' || '/' || '.'){
																	recheckOperationturn false;
																}
																else{
																	document.getElementById("display").value += val;
																}*/
																	/*var z = '';
																	document.getElementById("display").value = z;
																	lastChararcter = z.charAt(z.length - 1);
																	console.log(lastChararcter);
																	if(lastChararcter == '+' || lastChararcter == '-' || lastChararcter == '*' || lastChararcter == '/' || lastChararcter == '.'  ){
																		return false;
																	}
																	else{*/

																		document.getElementById("display").value += val;


																			if(val == '+' || val == '-' || val == '*' || val == '/'){
																				operator = val;
																				var index = document.getElementById("display").value.indexOf(operator);
																				console.log(operator);
																				console.log("indexOfOperator is ="+index);



																			}
																				if(val == '1' || val == '2' || val == '3' || val == '4' || val == '5' || val == '6' || val == '7'  || val == '8'  || val == '9' || val == '0'){
																					number = document.getElementById("display").value.substring(document.getElementById("display").value.lastIndexOf(operator));
																					console.log(number)

																			}

																	}





												function e(){

                                    	 z = document.getElementById("display").value;
																			if(z.includes('+')||z.includes('-')||z.includes('*')||z.includes('/')){
																				checkOperation=true;
																			}
													try{

															if(lastOperation == false&&checkOperation==true){
                                    console.log("working");
																	document.getElementById("display").value = eval(z);
																	lastOperation = true;
															}
															else{


																var combine = z + number;
																console.log(combine);

																document.getElementById("display").value = eval(combine);

															}



														}
													  catch(e){
																c('Error')
													  }
												}
		</script>
	</body>
</html>
